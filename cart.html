<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Cart – Haus of Ash</title>
  <!-- Use the same fonts and styles as the main site -->
  <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;700&family=Montserrat:wght@300;400;600&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <!-- Navigation bar -->
  <nav class="navbar">
    <a href="index.html#about">About</a>
    <a href="index.html#contact">Contact</a>
    <a href="cart.html">Cart</a>
  </nav>
  <!-- Hero section for the cart page -->
  <header class="hero">
    <div class="overlay">
      <h1 class="logo"><span class="silver">HAUS OF</span> <span class="gold">ASH</span></h1>
      <h2>Your Cart</h2>
    </div>
  </header>
  <section class="section">
    <div id="cart-items">
      <!-- Cart items will be rendered here -->
    </div>
  </section>
  <section id="contact" class="section contact">
    <h2>Need Help?</h2>
    <p>Email us at <a href="mailto:hausofash@gmail.com">hausofash@gmail.com</a></p>
    <p>Follow us on Instagram: <strong>#hausofashalchemist</strong></p>
  </section>
  <script>
    // Render the cart with Shopify‑like quantity and price controls
    function renderCart() {
      const cart = JSON.parse(localStorage.getItem('cart') || '[]');
      const container = document.getElementById('cart-items');
      if (cart.length === 0) {
        container.innerHTML = '<p>Your cart is empty.</p>';
        return;
      }
      let html = '<table class="cart-table">';
      html += '<tr><th>Item</th><th>Variant</th><th>Price</th><th>Quantity</th><th>Total</th><th>Action</th></tr>';
      // Build rows for each cart item
      cart.forEach((item, index) => {
        const lineTotal = (item.price * item.quantity).toFixed(2);
        html += '<tr>';
        html += '<td>' + item.product + '</td>';
        html += '<td>' + item.variant + '</td>';
        html += '<td>$' + item.price.toFixed(2) + '</td>';
        html += '<td>' +
          '<button onclick="updateQuantity(' + index + ', -1)">−</button> ' + item.quantity + ' <button onclick="updateQuantity(' + index + ', 1)">+</button>' +
          '</td>';
        html += '<td>$' + lineTotal + '</td>';
        html += '<td><button onclick="removeItem(' + index + ')">Remove</button></td>';
        html += '</tr>';
      });
      // Calculate total
      const total = cart.reduce((sum, item) => sum + item.price * item.quantity, 0);
      html += '<tr><td colspan="4" style="text-align:right;"><strong>Total</strong></td><td><strong>$' + total.toFixed(2) + '</strong></td><td></td></tr>';
      html += '</table>';
      // Build mailto link with order summary
      const bodyLines = cart.map(item => item.quantity + '× ' + item.product + ' (' + item.variant + ') - $' + (item.price * item.quantity).toFixed(2));
      bodyLines.push('Total: $' + total.toFixed(2));
      const mailto = 'mailto:hausofash@gmail.com?subject=Order%20Request&body=' + encodeURIComponent(bodyLines.join('\n'));
      html += '<p><a href="' + mailto + '" class="btn">Checkout via Email</a></p>';
      container.innerHTML = html;
    }
    // Update quantity of an item in the cart
    function updateQuantity(index, delta) {
      const cart = JSON.parse(localStorage.getItem('cart') || '[]');
      if (!cart[index]) return;
      cart[index].quantity += delta;
      if (cart[index].quantity <= 0) {
        cart.splice(index, 1);
      }
      localStorage.setItem('cart', JSON.stringify(cart));
      renderCart();
    }
    // Remove an item from the cart
    function removeItem(index) {
      const cart = JSON.parse(localStorage.getItem('cart') || '[]');
      cart.splice(index, 1);
      localStorage.setItem('cart', JSON.stringify(cart));
      renderCart();
    }
    // Render the cart when the page loads
    document.addEventListener('DOMContentLoaded', renderCart);
  </script>
</body>
</html>